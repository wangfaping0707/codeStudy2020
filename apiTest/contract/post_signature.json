[
  {
    "name": "合同签章",
    "variableFiles": [
      "测试数据",
      "keywords-uuid"
    ],
    "case": [
      {
        "name": "正向合同签章",
        "steps": [
          {
            "name": "11位随机串",
            "type": "rft",
            "keyword": "evaluate",
            "params": [
              "random.randint(0,99999999999)",
              "modules=random"
            ]
          },
          {
            "name": "uuid",
            "doc": "生成随机串",
            "type": "keyword",
            "keyword": "kw-uuid"
          },
          {
            "name": "登录",
            "type": "http",
            "input": {
              "method": "PoSt",
              "url": "${login_url}",
              "params": null,
              "data": null,
              "req_json": {
                "username": "liuying008@bccto.me",
                "password": "vgzQ2KHLn7+3CO5fR7gB/Q=="
              },
              "req_headers": {
                "Content-Type": "application/json; charset=UTF-8"
              },
              "timeout": null
            },
            "expect": {
              "expect_status_code": 200,
              "expect_resp_headers": null,
              "expect_resp_body": null,
              "expect_resp_json": null,
              "expect_resp_body_contains": null
            }
          },
          {
            "name": "token认证",
            "type": "http",
            "input": {
              "method": "get",
              "url": "${url}/api/authorized-user",
              "params": null,
              "data": null,
              "req_json": null,
              "req_headers": {
                "xforce-saas-token": "${登录}[resp][json][data][xforce-saas-token]",
                "Content-Type": "application/json; charset=UTF-8"
              },
              "timeout": null
            },
            "expect": {
              "expect_status_code": 200,
              "expect_resp_headers": null,
              "expect_resp_body": null,
              "expect_resp_json": null,
              "expect_resp_body_contains": null
            }
          },
          {
            "name": "新建合同",
            "type": "http",
            "input": {
              "method": "PUT",
              "url": "${eccp}/api/eccp/v1/contract",
              "data": null,
              "req_json": {
                "bizType": "1",
                "contractName": "2020${11位随机串}",
                "contractOrderNo": "BC${11位随机串}",
                "contractOrderType": "new",
                "contractType": "1",
                "contractUrl": "www.baidu.com",
                "endDate": "2021-12-09 01:00:54",
                "printNum": 10,
                "purOrgId": 301,
                "purOrgName": "橙色集团",
                "purchaserId": 5350,
                "purchaserName": "徐岚风",
                "remark": "{11位随机串}",
                "signStatus": "1",
                "startDate": "2020-12-09 11:00:54",
                "status": "1",
                "supplierId": 6030,
                "supplierName": "株式会社",
                "tenantId": "${token认证}[resp][json][data][tenantId]",
                "tenantName": "${token认证}[resp][json][data][tenantName]"
              },
              "req_headers": {
                "x-access-token": "${登录}[resp][json][data][xforce-saas-token]",
                "Content-Type": "application/json; charset=UTF-8"
              },
              "timeout": null
            },
            "expect": {
              "expect_status_code": 200,
              "expect_resp_headers": null,
              "expect_resp_body": null,
              "expect_resp_json": null,
              "expect_resp_json_contains": {
                "code": 1,
                "success": true,
                "result": true,
                "message": "成功"
              }
            }
          },
          {
            "name": "检查合同表主信息",
            "type": "mysql",
            "input": {
              "sql": "select * from eccp_supplier_portal.contract where contract_order_no ='BC${11位随机串}'",
              "config": "${数据库配置}"
            }
          },
          {
            "name": "sql断言",
            "type": "rft",
            "keyword": "length_should_be",
            "params": [
              "${检查合同表主信息}",
              "${1}"
            ]
          },
          {
            "name": "正向搜索合同列表",
            "type": "http",
            "input": {
              "method": "POST",
              "url": "${eccp}/api/eccp/v1/contract/_search",
              "data": null,
              "req_json": {
                "contractOrderNo": "BC${11位随机串}",
                "contractOrderType": "new",
                "contractType": "1",
                "pageNo": 0,
                "pageSize": 10,
                "status": "1"
              },
              "req_headers": {
                "x-access-token": "${登录}[resp][json][data][xforce-saas-token]",
                "Content-Type": "application/json; charset=UTF-8"
              },
              "timeout": null
            },
            "expect": {
              "expect_status_code": 200,
              "expect_resp_headers": null,
              "expect_resp_body": null,
              "expect_resp_json": null,
              "expect_resp_json_contains": null
            }
          },
          {
            "name": "合同签章",
            "type": "http",
            "input": {
              "method": "POST",
              "url": "${eccp}/api/eccp/v1/contract/signature/${正向搜索合同列表}[resp][json][result][records][0][contractNo]",
              "data": null,
              "req_headers": {
                "x-access-token": "${登录}[resp][json][data][xforce-saas-token]",
                "Content-Type": "application/json; charset=UTF-8"
              },
              "timeout": null
            },
            "expect": {
              "expect_status_code": 200,
              "expect_resp_headers": null,
              "expect_resp_body": null,
              "expect_resp_json": null,
              "expect_resp_json_contains": {
                "code": 1,
                "success": true,
                "result": true,
                "message": "成功"
              }
            }
          }
        ]
      }
    ]
  }
]